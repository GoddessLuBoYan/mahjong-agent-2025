# 国标麻将智能体

修改自Botzone用户 HaibaraAi （[github](https://github.com/zhuozhiyongde)）的智能体（id：66848fb9b54d400b709c4424），该智能体基本实现了2023年的sota（state-of-the-art）模型

修改内容：

    1. 删除了没有被使用的模型代码，方便理解
    2. 并行处理数据，从原来的每进程只处理200条改为每进程处理math.ceil(总条数/进程数)条，确保每个进程跑一次即可跑完所有数据，提高数据处理效率
    3. （重点）feature.py对OFFSET_OBS新增了25条one-hot特征（包括牌的点数1-16（字牌为10-16）、类型（五种）、是否为幺九牌、字牌、推不倒、绿一色）。
    4. 所有数据均统一放在./data下；windows平台视为本机，linux平台视为botzone环境。
    5. 训练支持设置seed，并且启用cudnn的确定性模式，确保训练过程可复现

已知问题：

    1. 推不倒存在bug，9条没有被归类为推不倒（实际9条是推不倒的）
    2. 暂时没有添加全双刻的one-hot特征。（实际测试发现添加了以后性能反而下降，原因不明）
    3. feature.py计算胡牌概率的代码存在问题，导致相关维度计算结果始终为0（实际测试发现bug修复后性能反而下降，原因不明）